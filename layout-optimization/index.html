<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/blog/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/blog/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav ul li a { background-image: none; } .site-nav > ul.nav-category-list > li > button svg { transform: rotate(-90deg); } .site-nav > ul.nav-category-list > li.nav-list-item > ul.nav-list { display: block; } </style> <script src="/blog/assets/js/vendor/lunr.min.js"></script> <script src="/blog/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/blog/assets/icons/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Layout optimization for a solar tower power plant | ML Blog</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Layout optimization for a solar tower power plant" /> <meta name="author" content="Marko Lalovic" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A solar power tower plant uses flat, rotating mirrors called heliostats to reflect and concentrate solar radiation onto a tower-mounted receiver. Figure 1 shows heliostats reflecting sunlight during solar noon, when the sun is at its zenith in the sky." /> <meta property="og:description" content="A solar power tower plant uses flat, rotating mirrors called heliostats to reflect and concentrate solar radiation onto a tower-mounted receiver. Figure 1 shows heliostats reflecting sunlight during solar noon, when the sun is at its zenith in the sky." /> <link rel="canonical" href="http://localhost:4000/blog/layout-optimization/" /> <meta property="og:url" content="http://localhost:4000/blog/layout-optimization/" /> <meta property="og:site_name" content="ML Blog" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2022-07-12T00:00:00+02:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Layout optimization for a solar tower power plant" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Marko Lalovic"},"dateModified":"2022-07-12T00:00:00+02:00","datePublished":"2022-07-12T00:00:00+02:00","description":"A solar power tower plant uses flat, rotating mirrors called heliostats to reflect and concentrate solar radiation onto a tower-mounted receiver. Figure 1 shows heliostats reflecting sunlight during solar noon, when the sun is at its zenith in the sky.","headline":"Layout optimization for a solar tower power plant","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/layout-optimization/"},"url":"http://localhost:4000/blog/layout-optimization/"}</script> <!-- End Jekyll SEO tag --> <!-- Load dark color theme --> <link id="dark-theme" rel="stylesheet" href="/blog/assets/css/just-the-docs-dark.css" media="(prefers-color-scheme: dark)" /> <!-- Fonts: post-font-family: "Noto Sans" heading-font-family: "Lato" mono-font-family: "Fira Code" --> <link rel="preconnect" href="https://fonts.googleapis.com" /> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /> <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"> <!-- MathJax config --> <script type="text/javascript"> window.MathJax = { tex: { packages: ["base", "ams", "newcommand", "boldsymbol"], inlineMath: [ ["$", "$"], ["\\(", "\\)"], ], tags: "ams" }, loader: { load: ["ui/menu", "[tex]/ams", "[tex]/newcommand", "[tex]/boldsymbol"], versionWarnings: false, }, }; </script> <!-- MathJax snippet --> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" ></script> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div id="side-bar-component" class="side-bar"> <div class="site-header" role="banner"> <a href="/blog/" class="site-title lh-tight"> <p class="my-site-title">ML Blog</p> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"> <!-- Added `reversed` so that posts are sorted by date in reverse --><li class="nav-list-item"><!-- Added some >> pseudo class, but only to my Posts titles --> <!-- Changed typography: fw-400 --> <a href="/blog/" class="nav-list-link fs-5">Index</a><!-- changed typography: fw-400 fs-4 --></li></ul> <!-- Don't show my Posts collection name --><ul class="nav-list"> <!-- Added `reversed` so that posts are sorted by date in reverse --><li class="nav-list-item"><!-- Added some >> pseudo class, but only to my Posts titles --> <!-- Changed typography: fw-400 --><!-- changed typography: fw-400 fs-4 --> <a href="/blog/max-cut-sdp/" class="nav-list-link fs-3 before-pseudo-class">Maximum cut and Goemans-Williamson</a></li><li class="nav-list-item"><!-- Added some >> pseudo class, but only to my Posts titles --> <!-- Changed typography: fw-400 --><!-- changed typography: fw-400 fs-4 --> <a href="/blog/layout-optimization/" class="nav-list-link fs-3 before-pseudo-class">Layout optimization for a solar tower power plant</a></li><li class="nav-list-item"><!-- Added some >> pseudo class, but only to my Posts titles --> <!-- Changed typography: fw-400 --><!-- changed typography: fw-400 fs-4 --> <a href="/blog/lasso-dual/" class="nav-list-link fs-3 before-pseudo-class">Lasso dual</a></li><li class="nav-list-item"><!-- Added some >> pseudo class, but only to my Posts titles --> <!-- Changed typography: fw-400 --><!-- changed typography: fw-400 fs-4 --> <a href="/blog/tda-digits/" class="nav-list-link fs-3 before-pseudo-class">Topological features applied to the MNIST data set</a></li><li class="nav-list-item"><!-- Added some >> pseudo class, but only to my Posts titles --> <!-- Changed typography: fw-400 --><!-- changed typography: fw-400 fs-4 --> <a href="/blog/water-towers/" class="nav-list-link fs-3 before-pseudo-class">Some math behind water towers</a></li><li class="nav-list-item"><!-- Added some >> pseudo class, but only to my Posts titles --> <!-- Changed typography: fw-400 --><!-- changed typography: fw-400 fs-4 --> <a href="/blog/covid-calc/" class="nav-list-link fs-3 before-pseudo-class">Covid Calculator</a></li><li class="nav-list-item"><!-- Added some >> pseudo class, but only to my Posts titles --> <!-- Changed typography: fw-400 --><!-- changed typography: fw-400 fs-4 --> <a href="/blog/direct-approach-to-fdr/" class="nav-list-link fs-3 before-pseudo-class">On Storey's direct approach to false discovery rates</a></li><li class="nav-list-item"><!-- Added some >> pseudo class, but only to my Posts titles --> <!-- Changed typography: fw-400 --><!-- changed typography: fw-400 fs-4 --> <a href="/blog/ridge-regression/" class="nav-list-link fs-3 before-pseudo-class">Ridge regression</a></li><li class="nav-list-item"><!-- Added some >> pseudo class, but only to my Posts titles --> <!-- Changed typography: fw-400 --><!-- changed typography: fw-400 fs-4 --> <a href="/blog/ols-regression/" class="nav-list-link fs-3 before-pseudo-class">Multicollinearity effect on OLS regression</a></li></ul> </nav> <footer class="site-footer"></footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search ML Blog" aria-label="Search ML Blog" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <button id="toggle-theme-button" name="Swich Theme" class="toggle-btn site-button fw-500 fs-5" onclick="toggleTheme()"> <!-- Sun --> <svg width="24" height="24" id="light-icon" display="none"> <g transform="translate(0,1) scale( 0.9 )"> <circle cx="12" cy="12" r="6" fill="rgb(110, 110, 110)" /> <line id="ray" stroke="rgb(110, 110, 110)" stroke-width="2" stroke-linecap="round" x1="12" y1="1" x2="12" y2="3.3" ></line> <!-- rest of rays are just rotated top ray --> <use href="#ray" transform="rotate(45 12 12)" /> <use href="#ray" transform="rotate(90 12 12)" /> <use href="#ray" transform="rotate(135 12 12)" /> <use href="#ray" transform="rotate(180 12 12)" /> <use href="#ray" transform="rotate(225 12 12)" /> <use href="#ray" transform="rotate(270 12 12)" /> <use href="#ray" transform="rotate(315 12 12)" /> </g> </svg> <!-- Moon --> <svg width="24" height="24" id="dark-icon" display="none"> <g transform="translate(0,1) scale( 0.9 )"> <path fill="rgb(110, 110, 110)" d=" M 18, 4 A 10 10 0 1 0 18, 20 A 10 10 0 0 1 18, 4" /> </g> </svg> </button> </li> <li class="aux-nav-list-item"> <a href="https://lalovic.io" class="site-button fw-500 fs-5"> About </a> </li> </ul> </nav> <!-- Light and dark theme toggle --> <script> var currentTheme = ""; const toggleThemeButton = document.getElementById("toggle-theme-button"); const lightIcon = document.getElementById("light-icon"); const darkIcon = document.getElementById("dark-icon"); const defaultTheme = document.getElementsByTagName("link")[0]; const lightThemeHTML = '<link id="light-theme" rel="stylesheet" href="/blog/assets/css/just-the-docs-light.css"/>'; const darkThemeHTML = '<link id="dark-theme" rel="stylesheet" href="/blog/assets/css/just-the-docs-dark.css"/>'; if ( window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ) { currentTheme = "dark"; toggleThemeButton.setAttribute("title", "Switch to light mode"); darkIcon.setAttribute("display", "none"); lightIcon.setAttribute("display", "block"); } else { currentTheme = "light"; toggleThemeButton.setAttribute("title", "Switch to dark mode"); darkIcon.setAttribute("display", "block"); lightIcon.setAttribute("display", "none"); } function removeBothThemes() { const lightTheme = document.getElementById("light-theme"); const darkTheme = document.getElementById("dark-theme"); if (lightTheme !== null) { lightTheme.remove(); } if (darkTheme !== null) { darkTheme.remove(); } } function darkOn() { removeBothThemes(); defaultTheme.insertAdjacentHTML("afterend", darkThemeHTML); currentTheme = "dark"; localStorage.setItem("currentThemeLS", "dark"); toggleThemeButton.setAttribute("title", "Switch to light mode"); lightIcon.setAttribute("display", "block"); darkIcon.setAttribute("display", "none"); } function lightOn() { removeBothThemes(); defaultTheme.insertAdjacentHTML("afterend", lightThemeHTML); currentTheme = "light"; localStorage.setItem("currentThemeLS", "light"); toggleThemeButton.setAttribute("title", "Switch to dark mode"); lightIcon.setAttribute("display", "none"); darkIcon.setAttribute("display", "block"); } function toggleTheme() { if (currentTheme == "dark") { lightOn(); } else { darkOn(); } } if (localStorage.getItem("currentThemeLS") !== null) { const currentThemeLS = localStorage.getItem("currentThemeLS"); if (currentThemeLS !== currentTheme) { if (currentThemeLS == "dark") { darkOn(); } else { lightOn(); } } } </script> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 class="fs-7">Layout optimization for a solar tower power plant</h1> <p class="my-post-meta"> Marko Lalovic &nbsp; Jul 12, 2022 </p> <p class="post-content"> <strong>TLDR:</strong> Finding the optimal arrangement of heliostats to maximize the energy production of a solar tower power plant. </p> <div class="post-content"> <p>A solar power tower plant uses flat, rotating mirrors called <strong><em>heliostats</em></strong> to reflect and concentrate solar radiation onto a tower-mounted receiver. <a href="#figure1">Figure 1</a> shows heliostats reflecting sunlight during solar noon, when the sun is at its zenith in the sky.</p> <div id="figure1" class="imgcap"> <img src="/blog/assets/posts/layout-optimization/solar-power-tower.svg" alt="Schematic of a solar power tower plant" width="80%" /> <div class="thecap"> Figure 1: Schematic of a solar power tower plant. </div> </div> <!-- A heliostat, positioned on a pylon, redirects sunlight onto a tower-mounted receiver. --> <!-- a day the position of the sun varies and each --> <p>Throughout the day, each heliostat rotates to ensure that the sunlight remains focused on the receiver by using a tracking system as shown in <a href="#figure2">Figure 2</a>.</p> <div class="mono-italic"> Click to animate the diagram: </div> <p><button class="btn btn-blue" title="Run" id="runButton" onclick="run()">RUN</button></p> <div id="figure2" class="imgcap-nbd"> <img id="heliostat-rotation-static" src="/blog/assets/posts/layout-optimization/heliostat-rotation-static.svg" width="70%" class="invertImg" /> <div id="heliostat-rotation-dynamic" class="div-for-inline-svg width70p"> <!--viewBox="0 0 158.75 66.146" test with viewBox="-10 -10 160 80" --> <!-- viewBox="0 0 158.75 66.146" --> <svg id="elements" width="100%" viewBox="0 0 158.75 66.146" xmlns="http://www.w3.org/2000/svg" display="none"> <path id="frame" style="fill:none;stroke:rgba(0, 0, 0, 0.501);stroke-width:0.3;stroke-linejoin:round;stroke-opacity:1" d="M.055.055h158.64V66.09H.055z" /> <path id="tower" style="fill:rgba(184, 182, 226, 0.512);stroke:black;stroke-width:.3;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1" d="m18 65.599 23.346.028.102-34.15 7.18-.219 4.8-26.488H17.921Z" /> <path id="pylon" style="fill:none;fill-opacity:1;stroke:black;stroke-width:.6;stroke-linejoin:round;stroke-opacity:1" d="m84.102 51.6-.045 14.227" /> <circle id="H2" style="fill:black;fill-opacity:1;stroke:white;stroke-width:.2;stroke-linejoin:round;stroke-opacity:1" cx="84.079" cy="51.535" r="1" /> <circle id="R0" style="fill:black;fill-opacity:1;stroke:white;stroke-width:.2;stroke-linejoin:round;stroke-opacity:1" cx="48.631" cy="31.22" r="0.1" /> <circle id="R4" style="fill:black;fill-opacity:1;stroke:white;stroke-width:.2;stroke-linejoin:round;stroke-opacity:1" cx="53.398" cy="4.792" r="0.1" /> </svg> </div> <div class="thecap margin-top-correct"> Figure 2: Heliostat rotation. </div> </div> <!-- Run viz --> <script> function Vector(x, y) { this.x = x; this.y = y; } function add(vecU, vecV) { return new Vector(vecU.x + vecV.x, vecU.y + vecV.y); } function subtract(vecU, vecV) { return new Vector(vecU.x - vecV.x, vecU.y - vecV.y); } function getVector(ptP, ptQ) { return subtract(ptQ, ptP); } function getPoint(elementP) { var cx = parseFloat(elementP.getAttributeNS(null, "cx")); var cy = parseFloat(elementP.getAttributeNS(null, "cy")); return new Vector(cx, cy); } function norm(vecV) { return Math.sqrt(vecV.x * vecV.x + vecV.y * vecV.y); } function scaleVector(vecV, scale) { return new Vector(vecV.x * scale, vecV.y * scale); } function dotProduct(vecU, vecV) { return vecU.x * vecV.x + vecU.y * vecV.y; } function perp(vecV) { return new Vector(-vecV.y, vecV.x); } function intersect(x1, y1, x2, y2, x3, y3, x4, y4) { /* adapted from http://paulbourke.net/geometry/pointlineplane/ */ var denominator = ((y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1)); var ua = ((x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3)) / denominator; var x = x1 + ua * (x2 - x1); var y = y1 + ua * (y2 - y1); return new Vector(x, y); } function drawPoint(name, x, y) { var size = 1; var ptStyle = "fill: blue; stroke: white; stroke-width: 0.1px;"; var circle = document.createElementNS(svgns, "circle"); circle.setAttributeNS(null, "id", name); circle.setAttributeNS(null, "cx", x); circle.setAttributeNS(null, "cy", y); circle.setAttributeNS(null, "r", size); circle.setAttributeNS(null, "style", ptStyle); g.appendChild(circle); } function drawLine(name, x1, y1, x2, y2, isRay) { var rayStyle = "stroke-dasharray: 0.5,0.5;" + "stroke: red; stroke-width: 0.4px;"; var lineStyle = "stroke: black; stroke-width: 1px;"; var aLine = document.createElementNS(svgns, "line"); aLine.setAttributeNS(null, "id", name); aLine.setAttributeNS(null, "x1", x1); aLine.setAttributeNS(null, "y1", y1); aLine.setAttributeNS(null, "x2", x2); aLine.setAttributeNS(null, "y2", y2); if (isRay) { aLine.setAttributeNS(null, "style", rayStyle); } else { aLine.setAttributeNS(null, "style", lineStyle); } g.appendChild(aLine); return aLine; } function updateLine(aLine, x1, y1, x2, y2) { aLine.setAttributeNS(null, "x1", x1); aLine.setAttributeNS(null, "y1", y1); aLine.setAttributeNS(null, "x2", x2); aLine.setAttributeNS(null, "y2", y2); } /* Function run() to animate the diagram */ function run() { var button = document.getElementById("runButton"); button.disabled = true; /* remove static svg and add a dummy element after viz element */ const svgStatic = document.getElementById("heliostat-rotation-static"); if (svgStatic !== null) { svgStatic.remove(); const heliVizElement = document.getElementById("heliostat-rotation-dynamic"); const heliVizDummy = '<div id="heliostat-rotation-viz-dummy" class="div-dummy">'; heliVizElement.insertAdjacentHTML("afterend", heliVizDummy); } /* show the viz svg */ g.setAttribute("display", "block"); var step = phiStepSize; var phi = 0; var id = null; clearInterval(id); id = setInterval(frame, 5); function frame() { if (phi < Math.PI) { phi += step; update(phi); } else { clearInterval(id); button.disabled = false; } } } function update(phi) { var vecS = new Vector(Math.cos(phi), -Math.sin(phi)); vecS = scaleVector(vecS, radius); /* solar vector */ var vecRplusS = add(vecR, vecS); var vecN = scaleVector(vecRplusS, radius / norm(vecRplusS)); /* normal */ var vecH = perp(vecN); /* vector along the heliostat */ for (var i = 0; i < nrays; i++) { ptsH[i] = add(ptH2, scaleVector(vecH, -1 + 2 / (nrays - 1) * i)); /* draw the rays from heliostat to receiver to the sun */ /* intersect (ray Hi + scaled vector r) and (receiver segment R0R4) */ var ptHiRi = add(ptsH[i], scaleVector(vecR, scaleFactor)); var ptHiSi = add(ptsH[i], scaleVector(vecS, scaleFactor)); var ptRecRayi = intersect( ptsH[i].x, ptsH[i].y, ptHiRi.x, ptHiRi.y, ptR0.x, ptR0.y, ptR4.x, ptR4.y); if (phi == 0) { /* initialize by drawing the lines */ recRays[i] = drawLine( "recRay" + i, ptsH[i].x, ptsH[i].y, ptRecRayi.x, ptRecRayi.y, true); sunRays[i] = drawLine( "sunRay" + i, ptsH[i].x, ptsH[i].y, ptHiSi.x, ptHiSi.y, true); } else { updateLine(recRays[i], ptsH[i].x, ptsH[i].y, ptRecRayi.x, ptRecRayi.y); updateLine(sunRays[i], ptsH[i].x, ptsH[i].y, ptHiSi.x, ptHiSi.y); } } if (phi == 0) { heliostat = drawLine( "heliostat", ptsH[0].x, ptsH[0].y, ptsH[nrays - 1].x, ptsH[nrays - 1].y); drawPoint("H2-again", ptH2.x, ptH2.y); } else { updateLine( heliostat, ptsH[0].x, ptsH[0].y, ptsH[nrays - 1].x, ptsH[nrays - 1].y); } } var svgns = "http://www.w3.org/2000/svg"; var g = document.getElementById("elements"); var phiStepSize = 0.005; var radius = 10; var nrays = 10; /* discretization of sun radiation */ var scaleFactor = 11; /* TODO: adjust to intersect frame boundaries */ /* heliostat center H2 and receiver */ var heliostat = null; var elementH2 = document.getElementById("H2"); var ptH2 = getPoint(elementH2); var elementR0 = document.getElementById("R0"); var elementR4 = document.getElementById("R4"); var ptR0 = getPoint(elementR0); var ptR4 = getPoint(elementR4); drawLine("receiver", ptR0.x, ptR0.y, ptR4.x, ptR4.y); /* receiver's center R2 */ var vectorR0R4 = getVector(ptR0, ptR4); var ptR2 = add(ptR0, scaleVector(vectorR0R4, 0.5)); drawPoint("R2", ptR2.x, ptR2.y); /* vector r from H2 in direction of receiver's center R2 */ var vecR = getVector(ptH2, ptR2); vecR = scaleVector(vecR, radius / norm(vecR)); /* initialize arrays for points and rays */ var ptsH = new Array(nrays).fill(null); var recRays = new Array(nrays).fill(null); var sunRays = new Array(nrays).fill(null); /* initialize drawing */ var phi = 0; update(phi); /* update(Math.PI/6 + 0.1); */ </script> <p>Note that the position of the sun varies, and individual heliostats can be blocked or shaded by neighboring heliostats, which affects the efficiency of the power plant. In addition, there are other factors that affect the power plant’s efficiency as described in <a href="#table1">Table 1</a>.</p> <div class="table-wrapper"><table id="table1"> <tr> <th>Name</th> <th>Description</th> </tr> <tr> <td>Cosine effect</td> <td> Loss due to the sun's rays not being perpendicular to the heliostat. </td> </tr> <tr> <td>Spillage effect</td> <td>Loss due to reflected rays missing the receiver.</td> </tr> <tr> <td>Atmospheric attenuation</td> <td>Loss due to atmospheric absorption.</td> </tr> <tr> <td>Shading effect</td> <td>Sun rays being blocked by neighboring heliostats heliostats.</td> </tr> <tr> <td>Blocking effect</td> <td>Reflected rays being blocked by neighboring heliostats.</td> </tr> <caption> Table 1: Key factors influencing plant efficiency. </caption> </table></div> <p>Given the specifications of the power plant, including the tower height and receiver dimensions, the task is to determine the optimal locations of heliostats that maximize the plant’s efficiency. This optimal arrangement of heliostats is referred to as <strong><em>optimal layout</em></strong>.</p> <p>Following a brief introduction, a simplified model is presented for determining the optimal layout. The task of finding an optimal layout for a single heliostat is solved using only geometry. In the case of multiple heliostats, discretization and ray tracing are used to estimate the efficiency of a solar power plant taking into account shading and blocking effects. Then, the layout is optimized using Sequential Quadratic Programming (SQP).</p> <h2 class="no_toc text-delta" id="table-of-contents">Table of contents</h2> <ol id="markdown-toc"> <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li> <li><a href="#optical-model-for-a-solar-tower-power-plant" id="markdown-toc-optical-model-for-a-solar-tower-power-plant">Optical model for a solar tower power plant</a></li> <li><a href="#cosine-effect" id="markdown-toc-cosine-effect">Cosine effect</a></li> <li><a href="#spillage-effect" id="markdown-toc-spillage-effect">Spillage effect</a></li> <li><a href="#atmospheric-attenuation" id="markdown-toc-atmospheric-attenuation">Atmospheric attenuation</a></li> <li><a href="#optimal-position-for-a-single-heliostat" id="markdown-toc-optimal-position-for-a-single-heliostat">Optimal position for a single heliostat</a></li> <li><a href="#multiple-heliostats" id="markdown-toc-multiple-heliostats">Multiple heliostats</a> <ol> <li><a href="#shading-and-blocking-effects" id="markdown-toc-shading-and-blocking-effects">Shading and blocking effects</a></li> <li><a href="#discretization-and-ray-tracing" id="markdown-toc-discretization-and-ray-tracing">Discretization and ray tracing</a></li> <li><a href="#the-layout-optimization-problem" id="markdown-toc-the-layout-optimization-problem">The layout optimization problem</a></li> <li><a href="#solving-the-layout-optimization-problem" id="markdown-toc-solving-the-layout-optimization-problem">Solving the layout optimization problem</a> <ol> <li><a href="#example" id="markdown-toc-example">Example</a></li> </ol> </li> </ol> </li> <li><a href="#source-code" id="markdown-toc-source-code">Source code</a></li> <li><a href="#references" id="markdown-toc-references">References</a></li> </ol> <h2 id="introduction">Introduction</h2> <p>Concentrating solar power systems such as solar tower power plants concentrate sunlight to produce electricity, offering a renewable energy production. However, the cost of electricity from these systems remain high compared to other renewable sources, as indicated in <a href="#figure3">Figure 3</a>.</p> <div id="figure3" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/energy-costs.svg" alt="Global weighted average cost of electricity" width="80%" class="invertImg" /> <div class="thecap"> Figure 3: Global weighted average cost of electricity. Data from: <a href="https://www.irena.org/Data/View-data-by-topic/Costs/Global-Trends">IRENA (2022)</a>. </div> </div> <p>Efforts in research and development are focused on improving efficiency, cutting construction and operation expenses, and ultimately reducing electricity production costs. <a href="#figure4">Figure 4</a> shows an experimental solar power tower plant at the German Aerospace Center.</p> <div id="figure4" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/DLR.jpg" alt="Experimental solar power plant" width="80%" /> <div class="thecap"> Figure 4: Experimental solar power plant near Jülich in Germany. Source: <a href="https://www.dlr.de/sf/en/desktopdefault.aspx/tabid-8560/15527_read-44867/">DLR</a> (CC-BY 3.0). </div> </div> <h2 id="optical-model-for-a-solar-tower-power-plant">Optical model for a solar tower power plant</h2> <p>We begin by examining a solar power tower plant employing a single heliostat and determining its optimal position. Although actual plants employ thousands of heliostats, focusing on a single one makes it easier to explain the model. Furthermore, the derived solution for a single heliostat allows us to verify the accuracy of the optimization methods to find the optimal layout for multiple heliostats. The model introduced here operates in two dimensions to simplify complexity, but a more realistic approach would involve replacing all definitions with their three-dimensional counterparts.</p> <p>The normal $n(t)$ of heliostat at time $t$ is given by</p> \[\newcommand{\norm}[1]{\left\lVert#1\right\rVert} n(t) = \frac{r + s(t)}{\norm{r + s(t)}}.\] <p>Here, $r$ denotes the direction from the center $H$ of the heliostat to the center of the receiver $R$, while $s(t)$ is the normalized solar vector at time $t$, as illustrated in <a href="#figure5">Figure 5</a>.</p> <div id="figure5" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/drawings/heliostat-normal.svg" width="80%" class="invertImg" /> <div class="thecap"> Figure 5: Vectors $r, s(t)$, and normal $n(t)$ of a heliostat. </div> </div> <h2 id="cosine-effect">Cosine effect</h2> <p>The primary energy loss in a solar power plant occurs when sunlight does not strike the heliostat perpendicularly. The effective reflection area of the heliostat is reduced by the cosine of one-half of the angle between vectors $r$ and $s$. This phenomenon is known as the <strong><em>cosine effect</em></strong>:</p> \[\eta_{cos} = \cos{\left( \frac{\gamma}{2} \right)}\] <p>where</p> \[\gamma = \angle (r, s).\] <p>As depicted in <a href="#figure6">Figure 6A</a>, an $\eta_{cos}$ value approximately 0 indicates minimal power output, while an $\eta_{cos}$ value close to 1 signifies maximum power output (<a href="#figure6">Figure 6B</a>).</p> <div id="figure6" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/drawings/cosine-effect.svg" width="80%" class="invertImg" /> <div class="thecap"> Figure 6: Cosine effect on the power output. No power (<strong>A</strong>) when $\eta_{cos} \approx 0$. Maximum power (<strong>B</strong>) when $\eta_{cos} \approx 1.$ </div> </div> <p>In order to determine the optimal position of the heliostat to maximize the power output, we will express the cosine effect $\eta_{cos}$ in terms of the heliostat’s center $H$. Let $\rho$ denote the angle between a line passing through the receiver’s center $R$ and the heliostat’s center $H$, and the horizontal line passing through $R$. Additionally, let $\phi$ denote the angle between the direction of sunlight and the ground’s horizontal plane, as shown in <a href="#figure7">Figure 7</a>.</p> <div id="figure7" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/drawings/angles.svg" width="80%" class="invertImg" /> <div class="thecap"> Figure 7: Angles $\gamma$, $\rho$ and $\phi.$ </div> </div> <p>In this simplified model, as the sun’s position changes throughout the day, the solar angle $\phi$ ranges from 0 to $\pi$. The angle $\gamma = \angle (r, s)$ can be expressed in terms of $\phi$ and $\rho$ as:</p> \[\phi = |\pi - \phi - \rho|\] <p>and <strong><em>cumulative daily cosine effect</em></strong> can be expressed in terms of $\rho$ as:</p> \[\begin{equation} \eta_{cos}(\rho) = \int_{0}^{\pi} \cos \left( \frac{|\pi - \phi - \rho |}{2} \right) d\phi = 2 \left( \sin \left( \frac{\rho}{2} \right) + \cos \left(\frac{\rho}{2}\right) \right). \label{eq: cosine-effect} \end{equation}\] <h2 id="spillage-effect">Spillage effect</h2> <p>Solely focusing on the cumulative daily cosine effect, the optimal position of the heliostat to maximize power output is directly underneath the receiver. This corresponds to $\rho = \pi/2$, as indicated by equation \ref{eq: cosine-effect}.</p> <p>However, in this position, many reflected rays from the heliostat fail to reach the receiver at various times throughout the day as illustrated in <a href="#figure8">Figure 8A</a>.</p> <div id="figure8" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/drawings/spillage-effect.svg" width="80%" class="invertImg" /> <div class="thecap"> Figure 8: Spillage effect on the power output. No power (<strong>A</strong>) when $\eta_{spill} \approx 0$. Maximum power (<strong>B</strong>) when $\eta_{spill} = 1.$ </div> </div> <p>This effect on the energy loss is known as <strong><em>spillage effect</em></strong> and can be defined as follows:</p> \[\eta_{spill} = \text{the proportion of rays that reach the receiver.}\] <p>To derive the spillage effect $\eta_{spill}$, let $\tau$ be the angle between the line passing through the receiver’s surface and the ground’s horizontal plane, as shown in <a href="#figure9">Figure 9</a>.</p> <div id="figure9" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/drawings/spillage-derivation.svg" width="80%" class="invertImg" /> <div class="thecap"> Figure 9: Notation in the derivation of the spillage effect. </div> </div> <p>Note that,</p> \[\begin{align*} \alpha &amp;= \pi - \tau - \rho \\[.5em] \beta &amp;= (\phi + \rho) / 2. \end{align*}\] <p>By similarity and sine rule,</p> \[\begin{align*} \frac{|AQ|}{|AR|} &amp;= \frac{|AP|}{|AH|} \\[.5em] \frac{|AR|}{\sin{\alpha}} &amp;= \frac{|AH|}{\sin{\beta}} \end{align*}\] <p>we can derive the spillage effect in terms of angles $\rho, \tau$ and $\phi$ as</p> \[\begin{equation} \eta_{spill} = \min \left( 1, \frac{|HP|}{|RQ|} \right) = \min \left( 1, \frac{\sin{(\pi - \tau - \rho)} }{ \sin{\left((\phi + \rho)/2\right)} } \right). \label{eq: spillage-effect} \end{equation}\] <p>Note that, in our model, the angle $\tau \approx 80^{\circ}$ and it is a fixed constant because it is part of plant’s specification. Therefore $\eta_{spill}$ only varies with respect to $\phi$ and $\rho$.</p> <h2 id="atmospheric-attenuation">Atmospheric attenuation</h2> <p>Another loss of energy is due to atmospheric attenuation. This loss depends on the distance $d$ between a heliostat and the receiver and assumes a visibility of 40 km. See <a class="citation" href="#Richter2017">(Richter, 2017)</a> for more details.</p> <p>Denote by $d$ the distance in meters from the center $H$ of the heliostat to the center of the receiver $R$:</p> \[\newcommand{\norm}[1]{\left\lVert#1\right\rVert} d = \norm{H - R}\] <p>The <strong><em>atmospheric attenuation effect</em></strong>, shown in <a>Figure 10</a>, is given by the formula:</p> \[\eta_{aa}(d) = \begin{cases} 0.99321 - 1.176 \cdot 10^{-4} d + 1.97 \cdot 10^{-8} d^{2}, \quad d \leq 1000 \, m\\ \exp(-1.106 \cdot 10^{-4} d), \quad d &gt; 1000 \, m \end{cases}\] <div id="figure10" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/drawings/AA-crop.png" width="50%" class="invertImg" /> <div class="thecap"> Figure 10: Atmospheric attenuation effect. </div> </div> <h2 id="optimal-position-for-a-single-heliostat">Optimal position for a single heliostat</h2> <p>To determine the optimal position for the center $H(\rho, d)$ of a single heliostat we define the following objective function called <strong><em>daily energy production</em></strong> of a power plant:</p> <blockquote class="note-title"> <p>Daily Energy Production (DEP)</p> \[\text{DEP}(\rho, d) = \frac{1}{\pi} \, \eta_{aa}(d) \, \int_{0}^{\pi} \eta_{cos}(\rho, \phi) \, \eta_{spill}(\rho, \phi) \, d\phi\] </blockquote> <p>Note:</p> <ul> <li> <p>The normalizing constant is $1/\pi$ because when there are no losses, all effects are 1 and $\int_{0}^{\pi} d\phi = \pi$.</p> </li> <li> <p>In this simplified model, as the sun’s position changes throughout the day, the solar angle $\phi$ ranges from 0 to $\pi$. This is why we integrate over $\phi$ from 0 to $\pi$.</p> </li> </ul> <p>To determine the optimal position for $H(\rho, d)$ that maximizes DEP, we need to find the optimal distance $d^{*}$ and optimal angle $\rho^{*}$.</p> <p>Since $\eta_{aa}(d)$ is a monotonically decreasing function,</p> \[\DeclareMathOperator*{\argmin}{arg\,min} d^{*} = \argmin_{d} \norm{ H - R } \quad \text{ subject to: } \norm{ H - R } &gt; 4 \, m.\] <p>In our model, the heliostat and receiver are both 4 meters in size and the rotation of heliostats adds a constraint $\norm{ H - R } &gt; 4 \, m.$ (See <a href="#figure11">Figure 11B</a>.) Therefore, the optimal distance is $d^{*} = 4 \, m$.</p> <p>Plugging into DEP the derived equations \ref{eq: cosine-effect} and \ref{eq: spillage-effect} for $\eta_{cos}$ and $\eta_{spill}$ and integrating, we get DEP with respect to $\rho$ shown in <a href="#figure11">Figure 11A</a>. The optimal angle $\rho$ is approximately $30^{\circ}$.</p> <p>The optimal position for a single heliostat is shown in <a href="#figure11">Figure 11B</a>.</p> <div id="figure11" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/drawings/solution-singleton.svg" width="80%" class="invertImg" /> <div class="thecap"> Figure 11: <strong>(A)</strong> Optimal angle $\rho$ and <strong>(B)</strong> optimal position for a single heliostat. </div> </div> <h2 id="multiple-heliostats">Multiple heliostats</h2> <h3 id="shading-and-blocking-effects">Shading and blocking effects</h3> <p>In case of multiple heliostats, individual heliostats can be blocked or shaded by neighboring heliostats, which affects the efficiency of the power plant (<a href="#figure12">Figure 12</a>). The effects of shading and blocking are defined as</p> \[\begin{align*} \eta_{shade} &amp;= \text{ proportion of incoming rays not shaded by neighboring heliostats} \\[.5em] \eta_{block} &amp;= \text{ proportion of reflected rays not blocked by neighboring heliostats}. \end{align*}\] <div id="figure12" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/drawings/shading-and-blocking-effects.svg" width="80%" class="invertImg" /> <div class="thecap"> Figure 12: The effects of shading (<strong>A</strong>) and blocking (<strong>B</strong>). </div> </div> <h3 id="discretization-and-ray-tracing">Discretization and ray tracing</h3> <p>Finding the optimal layout using only geometry is challenging when there are multiple heliostats.Therefore, discretization and ray tracing are used to estimate the reflected power of each heliostat that is hitting the receiver.</p> <p>For each heliostat, we divide the surface of the heliostat into equal-area regions. We then trace a ray from each region in the direction of the sun and in the direction of the receiver. <a href="#figure13">Figure 13</a> shows ray tracing for $m = 5$ rays.</p> <div id="figure13" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/drawings/ray-tracing.svg" width="80%" class="invertImg" /> <div class="thecap"> Figure 13: Tracing $m = 5$ rays from the surface of the heliostat towards the sun and towards the receiver. </div> </div> <p>Denote by $m$ the number of rays per heliostat and by $\eta_{ray, i}$ the proportion of rays that are received at the surface of heliostat $i$ and hit the surface of the receiver.</p> <h3 id="the-layout-optimization-problem">The layout optimization problem</h3> <p>For a given plant with $n$ heliostats with centers:</p> \[H_{1}, H_{2}, \dots, H_{n}\] <p>we approximate the daily energy production by</p> \[\widehat{\text{DEP}}(H_{1}, H_{2}, \dots, H_{n}) = \frac{1}{n \, m} \sum_{i = 1}^{n} \eta_{aa, i} \, \sum_{k = 1}^{m} \eta_{cos, i}(\phi_{k}) \, \eta_{ray, i}.\] <p>We can now define the layout optimization problem in a more formal manner.</p> <blockquote class="note-title"> <p>Layout optimization problem</p> <p>Determine the locations $H_{i}$ of heliostats $i = 1, 2, \dots, n$, that maximize the $\widehat{\text{DEP}}$ subject to:</p> <ul> <li>all $H_{i}$ are in the specified field area,</li> <li>all $H_{i}, H_{j}$ where $i \neq j$ are at least $4$ meters appart,</li> <li>$H_{i}, R$ are at least $4$ meters appart.</li> </ul> </blockquote> <p>An example of a valid layout for $n = 5$ heliostats is in <a href="#figure14">Figure 14</a>. Here the field area is specified as follows. Maximum distance from receiver’s center to a heliostat’s center is 35 meters and maximum height of heliostat’s center is 10 meters.</p> <div id="figure14" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/drawings/valid-layout.svg" width="60%" class="invertImg" /> <div class="thecap"> Figure 14: Field area and a valid layout for $n = 5$ heliostats. </div> </div> <h3 id="solving-the-layout-optimization-problem">Solving the layout optimization problem</h3> <p>Note that the objective function $\widehat{\text{DEP}}$ is not convex as indicated by <a href="#figure15">Figure 15</a>. It shows the plot of $\widehat{\text{DEP}}$ as we vary the location of $H_{3}$ in the layout shown in <a href="#figure14">Figure 14</a>.</p> <div id="figure15" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/drawings/landscapes-min.png" width="100%" class="invertImg" /> <div class="thecap"> Figure 15: Plot of $\widehat{\text{DEP}}(H_{3})$ as we vary the location of $H_{3}$. </div> </div> <p>Starting far from the global optimum and running a gradient ascent can lead us to a sub-optimal solution. Similarly with higher order methods. Despite this, we can still observe some interesting results.</p> <h4 id="example">Example</h4> <p>Running Sequential Quadratic Programming (SQP) method from a class of Lagrange-Newton methods starting from some initial layout with 3 heliostats, the method converges to the layout show in <a href="#figure16">Figure 16</a>. See the <a href="#source-code">Source code</a> for more details.</p> <div id="figure16" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/drawings/sqp-solution.svg" width="60%" class="invertImg" /> <div class="thecap"> Figure 16: Converged layout using SQP for $n = 3$ heliostats. </div> </div> <p>It places the heliostats some distance appart on the parabola with focal point $R$:</p> \[y = \frac{1}{48} x^{2}.\] <p>The layout we get for $n=5$ heliostats is shown in <a href="#figure1">Figure 1</a>. Intuitively this seems to be the best option. Generally speaking, the heliostats do not need to rotate so much to reflect the rays towards the receiver. Furthermore, the heliostats should be far apart in order to minimize the effects of shading and blocking. In particular, the effects of shading and blocking are most noticable when the cosine effect is minimized, that is when $\phi$ is roughly 90 degrees. In <a href="#figure17"> Figure 17</a> is sketch of the shadow from heliostat $H_{j}$ considering the values of $\phi$ close to 90 degrees.</p> <div id="figure17" class="imgcap-nbd"> <img src="/blog/assets/posts/layout-optimization/drawings/shadow.svg" width="60%" class="invertImg" /> <div class="thecap"> Figure 17: Sketch of the shadow from heliostat $H_{j}$ for values of $\phi$ close to 90 degrees. </div> </div> <h2 id="source-code">Source code</h2> <p>The repository containing all Python scripts is available here:</p> <div class="mono-italic"> <a href="https://github.com/markolalovic/math-mods-camp">https://github.com/markolalovic/math-mods-camp</a> </div> <p>The code for <a href="#example">Example</a> above:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">sys</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">from</span> <span class="n">scipy</span> <span class="kn">import</span> <span class="n">optimize</span>

<span class="c1"># load the specifications of the plant
</span><span class="n">hypo_plant</span> <span class="o">=</span> <span class="n">utils</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="sh">"</span><span class="s">../data/plants/tiny-plant.json</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># set the initial layout
</span><span class="n">basic_layout</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">10</span><span class="p">]])</span>
<span class="n">x0</span> <span class="o">=</span> <span class="n">basic_layout</span><span class="p">.</span><span class="nf">flatten</span><span class="p">()</span>

<span class="c1"># objective function
</span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">plant</span><span class="p">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">plant</span><span class="p">.</span><span class="nf">set_layout</span><span class="p">()</span>
    <span class="k">return</span> <span class="o">-</span><span class="n">utils</span><span class="p">.</span><span class="nf">get_energy</span><span class="p">(</span><span class="n">plant</span><span class="p">)</span>

<span class="c1"># set the bounds and constraints
</span><span class="n">bounds</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">bounds</span><span class="p">.</span><span class="nf">append</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">35</span><span class="p">))</span>
    <span class="n">bounds</span><span class="p">.</span><span class="nf">append</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>    

<span class="k">def</span> <span class="nf">g01</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">distance</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="nf">norm</span><span class="p">(</span><span class="n">layout</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">layout</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">distance</span> <span class="o">-</span> <span class="mi">4</span>

<span class="k">def</span> <span class="nf">g02</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">distance</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="nf">norm</span><span class="p">(</span><span class="n">layout</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">layout</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">distance</span> <span class="o">-</span> <span class="mi">4</span>

<span class="k">def</span> <span class="nf">g12</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">distance</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linalg</span><span class="p">.</span><span class="nf">norm</span><span class="p">(</span><span class="n">layout</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">layout</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">distance</span> <span class="o">-</span> <span class="mi">4</span>

<span class="n">constraints</span> <span class="o">=</span> <span class="p">[{</span><span class="sh">"</span><span class="s">type</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">ineq</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">fun</span><span class="sh">"</span><span class="p">:</span> <span class="n">g01</span><span class="p">},</span>
               <span class="p">{</span><span class="sh">"</span><span class="s">type</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">ineq</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">fun</span><span class="sh">"</span><span class="p">:</span> <span class="n">g02</span><span class="p">},</span>
               <span class="p">{</span><span class="sh">"</span><span class="s">type</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">ineq</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">fun</span><span class="sh">"</span><span class="p">:</span> <span class="n">g12</span><span class="p">}]</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">optimize</span><span class="p">.</span><span class="nf">minimize</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> 
                           <span class="n">method</span><span class="o">=</span><span class="sh">"</span><span class="s">SLSQP</span><span class="sh">"</span><span class="p">,</span> 
                           <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span>
                           <span class="n">constraints</span><span class="o">=</span><span class="n">constraints</span><span class="p">,</span>
                           <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">disp</span><span class="sh">'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="sh">'</span><span class="s">maxiter</span><span class="sh">'</span><span class="p">:</span> <span class="mi">100</span><span class="p">})</span>
<span class="c1"># Optimization terminated successfully    (Exit mode 0)
#             Current function value: -41.033956692960274
#             Iterations: 28
#             Function evaluations: 317
#             Gradient evaluations: 28
</span></code></pre></div></div> <h2 id="references">References</h2> <ol class="bibliography"><li><span id="Richter2017">Richter, P. (2017). <i>Simulation and optimization of solar thermal power plants</i> [PhD thesis, RWTH Aachen University]. https://doi.org/<a href="https://doi.org/10.18154/RWTH-2017-05351">10.18154/RWTH-2017-05351</a></span></li></ol> </div> <div> <section class="comments"> <!-- Add comment form --> <div id="respond" class="comment-new"> <h2>Leave a comment</h2> <form id="input-form" method="post" action="https://api.staticforms.xyz/submit"> <input type="hidden" name="accessKey" value="4e5a5ee1-5fd9-47ed-9b85-aecdabd0c006"> <input type="hidden" name="$Date" value="1716073094"> <input type="hidden" name="$BlogPost" value="Layout optimization for a solar tower power plant"> <input type="hidden" name="subject" value="Comment to blog post Sun, 19 May 2024 00:58:14 +0200"> <!-- DEBUG: hard coded redirect_url --> <input type="hidden" name="redirectTo" value="https://lalovic.io/blog/thanks"> <textarea class="wide-field" id="message" name="message" rows="8" cols="68" placeholder="Your comment (LaTeX markup accepted)" required></textarea> <div style="margin-top: 5px; margin-bottom: 5px;"> <input class="input-field" id="name" name="name" type="text" placeholder="Your name (optional)" /> <button class="btn btn-blue" id="submit-button" type="submit">Add Comment</button> </div> </form> <div id="preview-div"></div> <!-- Comment preview and rerenderMath function to apply MathJax to preview --> <script> function previewComment() { const content = document.getElementById("message").value; document.getElementById("comment-result-title").innerText = "Your comment:"; document.getElementById("comment-result").innerText = content; rerenderMath(); } function rerenderMath() { MathJax.typeset(); } var textareaInput = document.getElementById("message"); textareaInput.onkeyup = textareaInput.onkeypress = function() { document.getElementById("preview-div").innerText = this.value; rerenderMath(); } </script> </div> </section> </div> </main> <hr> <footer class="my-footer"> <p><a class="fs-5" href="#top" id="back-to-top">Back to top</a></p> <p class="fs-3 text-grey-dk-000"> CC-BY 2024, Marko Lalovic. Theme is based on <a href="https://just-the-docs.com/">Just the Docs</a>. </p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
